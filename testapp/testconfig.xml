<Configuration  >

  <DonnéesDeConnection>
    <source  ip="127.0.0.1" port="3306" nomBase="TestPFE" utilisateur="root" motdepasse="root" />

    <cible  hbase.master="localhost" hbase.zookeeper.quorum="localhost" hbase.zookeeper.property.clientPort="2181" />
  </DonnéesDeConnection>



    <FonctionClient>
        <Fonction nomclasse="com.vermeg.testapp.services.TestService" nomfonction="getAge" InputClass="java.lang.String" />
        <Fonction nomclasse="com.vermeg.testapp.services.TestService" nomfonction="getcurrency" InputClass="java.lang.String" />
    </FonctionClient>

    <VariablesGlobales>
        <vg nom="tauxr" value="#getcurrency('http://demo1525832.mockable.io/currency')" />
    </VariablesGlobales>


    <Transformations>

        <Transformation  id="0" typeidLigne="java.lang.Long" idLigne="#numEtudiant" tablesource="etudiant" tablecible="STUDENTS"  >
            <CleRicheDeMappage idpere="0" colonnesource="numEtudiant" type="java.lang.Long" colonnecible="FAMILY_STUDENT:id" cartographieformule="#numEtudiant"/>
            <CleRicheDeMappage idpere="0" colonnesource="nom,prenom" type="java.lang.String" colonnecible="FAMILY_STUDENT:Nom" cartographieformule="#nom+' '+#prenom"/>
            <CleRicheDeMappage idpere="0" colonnesource="email" type="java.lang.String" colonnecible="FAMILY_STUDENT:email" cartographieformule="#email"/>
            <CleRicheDeMappage idpere="0" colonnesource="birthDate" type="java.lang.Integer" colonnecible="FAMILY_STUDENT:age" cartographieformule="#getAge(#birthDate)"/>
        </Transformation>




        <Transformation  id="1" typeidLigne="java.lang.Long" idLigne="#USERId" tablesource="user" tablecible="EMPLOYEES"  >

            <CleRicheDeMappage  colonnesource="salaire" type="java.lang.String" converter="NumberConverter" ignoreIfNull="false"  pattern="###,###.##" cartographieformule="#salaire *#tauxr" condition="#salaire gt 300 ? true : false" colonnecible="FAMILY_EMPLOYEE:Salaire"/>
            <CleRicheDeMappage  colonnesource="taille" type="java.lang.Double" cartographieformule="#taille" condition="#taille gt 2 ? true : false" colonnecible="FAMILY_EMPLOYEE:Taille"/>
            <CleRicheDeMappage  colonnesource="birthDate" type="java.lang.Integer" cartographieformule="#getAge(#birthDate)" colonnecible="FAMILY_EMPLOYEE:Age"/>
            <CleRicheDeMappage  colonnesource="birthDate" converter="convertDateTime" pattern="MM/dd/yyyy" ignoreIfNull="true"  type="java.lang.String" cartographieformule="#birthDate" colonnecible="FAMILY_EMPLOYEE:BirthDate"/>
            <CleRicheDeMappage  colonnesource="FirstName,LastName" type="java.lang.String" cartographieformule="#firstName+' '+#lastName" colonnecible="FAMILY_EMPLOYEE:FullName"/>
            <CleRicheDeMappage  colonnesource="user.userId AS USERId" type="java.lang.Long" cartographieformule="#USERId" colonnecible="FAMILY_EMPLOYEE:Iduser"/>
            <Document   colonnessources="address.addressId, address.pays,address.ville,address.rue,address.codePostal,address.userByUserId"
                        colonnescibles="ADDRESS_EMPLOYEE:address"  CleJointure="'userByUserId = ' + T(java.lang.String).valueOf(#USERId)" tablesource="address" />



            <Document    colonnessources="addressdetails.id_detail, addressdetails.nom_detail, addressdetails.address_id"
                         colonnescibles="ADDRESS_EMPLOYEE:details" CleJointure="'addressdetails.address_id = address.addressId and address.userByUserId=' + T(java.lang.String).valueOf(#USERId)" tablesource="address,addressdetails" />


        </Transformation>






        <Transformation  id="3" typeidLigne="java.lang.Long" idLigne="#idDept" tablesource="departement" tablecible="DEPARTEMENT"  >
            <CleRicheDeMappage  colonnesource="idDept" type="java.lang.Long" cartographieformule="#idDept" colonnecible="DEPARTEMENT_DETAILS:iddepartement"/>
            <CleRicheDeMappage  colonnesource="nomDept" type="java.lang.String" cartographieformule="#nomDept" colonnecible="DEPARTEMENT_DETAILS:nomdepartement"/>

        </Transformation>



        <Transformation id="4" typeidLigne="java.lang.Long" idLigne="#userId"  tablesource="user" tablecible="FACULTY">
            <CleRicheDeMappage  colonnesource="userId" type="java.lang.Long" cartographieformule="#userId" colonnecible="ASSIGNMENT_FAMILY:IDUSER" />
            <CleRicheDeMappage  colonnesource="firstName,lastName" type="java.lang.String" cartographieformule="#firstName+' '+#lastName" colonnecible="ASSIGNMENT_FAMILY:FULLNAME" />
            <Document  tablesource="user_dept,departement"  colonnessources="departement.idDept,departement.nomDept"
                       colonnescibles="ASSIGNMENT_FAMILY:assignment"  CleJointure="'user_dept.user_id=' + T(java.lang.String).valueOf(#userId) + '  and  ' + 'departement.idDept=user_dept.dept_id' "/>
        </Transformation>






    </Transformations>

</Configuration>